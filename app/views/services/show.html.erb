<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Gostaria de deixar uma mensagem para o Contratante? (opicional)
      </div>
      <%= form_with(model: @user_service, class: "p-3 mb-3 rounded", local: true) do |f| %>
        <%= f.text_area :comment, class: "form-control rounded", placeholder: "Sua Mensagem",style: "height:100px;resize:none;"%>
        <%= f.hidden_field :service, value: @user_service.service.id %>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <%= f.submit('Confirmar', class: "btn btn-primary") %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<div id="page-content">
  <h2 class="text-center mt-4"><%= @service.title %></h2>
  <div class="container">
    <div class="row justify-content-md-center">
      <div class="col-8 mt-4">
        <div class="card text-center shadow mb-5 bg-white rounded border border-secondary">
          <div class="card-header font-italic">
            Criado por <%= link_to @service.user.name, user_path(@service.user) %>
          </div>

          <div class="card-body">
              <p class="card-text mt-2"><%= @service.description %></p>

              <div class="hstack gap-3 d-flex justify-content-center mb-3">
                  <% if @service.limit_date %>
                      <div>
                          <h6 class="mt-3">Realizar Ate:<h6>
                          <div class="card-text text-left" style="font-size:1.3rem;">
                              <%= @service.limit_date.strftime("%d/%m/%Y") %>
                          </div>
                      </div>
                  <% end %>

                  <div>
                      <h6 class="mt-3">Remuneração:<h6>
                      <div class="text-success" style="font-size:1.4rem;">
                          <%= ActionController::Base.helpers.number_to_currency(@service.value, :unit => "R$ ", :separator => ",", :delimiter => ".") %>
                      </div>
                  </div>
              </div>
              
              <% if user_signed_in? && ( @service.user == current_user ) %>
                  <%= link_to 'Editar', edit_service_path(@service), class: "btn btn-warning rounded-pill shadow" %>
                  <%= link_to 'Deletar', service_path(@service), class: "btn btn-danger rounded-pill shadow" , method: :delete, data: {confirm: "Are you sure?"} %>
              <% elsif  user_signed_in? && !current_user.isContratante %>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
                  Inscrever-se
                </button>
              <% end %>
          </div>       
          <div class="card-footer text-muted">
            <small>Criado a <%= time_ago_in_words(@service.created_at) %> atrás
            <% if @service.created_at != @service.updated_at %> 
             , Última Edição a <%= time_ago_in_words(@service.updated_at) %> atrás</small>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>